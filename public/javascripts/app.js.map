{"version":3,"sources":["app/initialize.js","app/list.js","app/userCard.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApKA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvJA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBA;AAAA","file":"public/javascripts/app.js","sourcesContent":["'use strict';\n\nvar _jquery = require('jquery');\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _fullpage = require('fullpage.js');\n\nvar _fullpage2 = _interopRequireDefault(_fullpage);\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _jqueryValidation = require('jquery-validation');\n\nvar _jqueryValidation2 = _interopRequireDefault(_jqueryValidation);\n\nrequire('jquery-validation/dist/additional-methods');\n\nrequire('./list.js');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// fullpage\n(0, _jquery2.default)(document).ready(function () {\n  (0, _jquery2.default)('#fullpage').fullpage({\n    anchors: ['page-1', 'page-2', 'page-3', 'page-4', 'page-5'],\n    menu: '#menu',\n    navigation: true\n  });\n});\n\nif (document.querySelector('.location__map-map')) {\n  document.querySelector('.location__map-map').addEventListener('touchstart', function () {\n    _jquery2.default.fn.fullpage.setAllowScrolling(false);\n  });\n\n  document.querySelector('.location__map-map').addEventListener('touchend', function () {\n    _jquery2.default.fn.fullpage.setAllowScrolling(true);\n  });\n}\n\n// popup\nvar popupButtonClose = (0, _jquery2.default)('.popup-close');\nvar popupButtonLink = (0, _jquery2.default)('.btn-popup__link'\n\n// validate\n);(0, _jquery2.default)(\"#form\").validate({\n  rules: {\n    form__surname: {\n      required: true\n    },\n    form__file: {\n      extension: 'png|jpg|jpeg',\n      required: true\n    }\n  },\n  messages: {\n    form__surname: {\n      required: 'Введите ваше ФИО'\n    },\n\n    form__file: {\n      required: 'Выберите файл',\n      extension: 'расширение должно быть jpg или png'\n    }\n  },\n  submitHandler: function submitHandler(form) {\n    var data = new FormData(form);\n    var config = { headers: { 'Content-Type': 'multipart/form-data' } };\n\n    _axios2.default.post('http://localhost:3000/register', data, config).then(function (res) {\n      if (res.data === 'success') {\n        (0, _jquery2.default)('.popup__text').text('Успешно!');\n        (0, _jquery2.default)('.popup').addClass('open-popup');\n      }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  }\n});\n\npopupButtonLink.click(function () {\n  (0, _jquery2.default)('.popup').removeClass('open-popup');\n});\n\npopupButtonClose.click(function () {\n  (0, _jquery2.default)('.popup').removeClass('open-popup');\n});\n\n(0, _jquery2.default)('.popup-overlay').click(function (evt) {\n  if ((0, _jquery2.default)(evt.target).closest('.popup-container').length == 0) {\n    (0, _jquery2.default)('.popup').removeClass('open-popup');\n  }\n});\n\n// navigation\n(0, _jquery2.default)(\"#navToggle\").click(function (evt) {\n  evt.stopPropagation();\n  (0, _jquery2.default)(this).toggleClass(\"active\");\n  (0, _jquery2.default)(\".main-nav-overlay\").toggleClass(\"open\");\n  (0, _jquery2.default)(\"body\").toggleClass(\"locked\");\n});\n\nvar links = (0, _jquery2.default)('.main-nav__link');\n\nlinks.each(function (a, link) {\n  link.addEventListener('click', function () {\n    (0, _jquery2.default)(\".main-nav-overlay\").removeClass(\"open\");\n    (0, _jquery2.default)(\"body\").removeClass(\"locked\");\n    (0, _jquery2.default)(\"#navToggle\").removeClass(\"active\");\n  });\n}\n\n// next code\n\n);(0, _jquery2.default)('.container').click(function (evt) {\n  evt.stopPropagation();\n});\n\n(0, _jquery2.default)('.main-nav-overlay').click(function (evt) {\n  evt.stopPropagation();\n});\n\n(0, _jquery2.default)('#fullpage').click(function (evt) {\n  evt.stopPropagation();\n});\n\n(0, _jquery2.default)('.popup').click(function (evt) {\n  evt.stopPropagation();\n}\n\n// file\n);(0, _jquery2.default)(function () {\n  var wrapper = (0, _jquery2.default)(\".file_upload\"),\n      btn = wrapper.find(\".button\"),\n      lbl = wrapper.find(\"mark\");\n  var inp = (0, _jquery2.default)(\"#form__file\");\n\n  // Crutches for the :focus style:\n  inp.focus(function () {\n    wrapper.addClass(\"focus\");\n  }).blur(function () {\n    wrapper.removeClass(\"focus\");\n  });\n\n  var file_api = window.File && window.FileReader && window.FileList && window.Blob ? true : false;\n\n  inp.change(function () {\n    var file_name;\n    if (file_api && inp[0].files[0]) file_name = inp[0].files[0].name;else file_name = inp.val().replace(\"C:\\\\fakepath\\\\\", '');\n\n    if (!file_name.length) return;\n\n    if (lbl.is(\":visible\")) {\n      lbl.text(file_name);\n      btn.text(\"Прикрепить фото\");\n    } else btn.text(file_name);\n  }).change();\n});\n(0, _jquery2.default)(window).resize(function () {\n  (0, _jquery2.default)(\".file_upload input\").triggerHandler(\"change\");\n});\n","'use strict';\n\nvar _jquery = require('jquery');\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _jqueryValidation = require('jquery-validation');\n\nvar _jqueryValidation2 = _interopRequireDefault(_jqueryValidation);\n\nvar _userCard = require('./userCard');\n\nvar _userCard2 = _interopRequireDefault(_userCard);\n\nvar _jqueryAutocomplete = require('jquery-autocomplete');\n\nvar _jqueryAutocomplete2 = _interopRequireDefault(_jqueryAutocomplete);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(0, _jquery2.default)(\"#registration-form\").validate({\n  rules: {\n    name: {\n      required: true\n    }\n  },\n  messages: {\n    name: {\n      required: 'Введите ваше ФИО'\n    }\n  },\n  submitHandler: function submitHandler(form) {\n    var data = new FormData(form);\n    var fieldData = data.get('name');\n\n    _axios2.default.post('http://localhost:3000/exist', { 'name': fieldData }).then(function (res) {\n      if (res.data.exist === 'exist') {\n        (0, _jquery2.default)(\".registration-item__content\").remove();\n        (0, _userCard2.default)(res.data.currentUserModel);\n        var currentUsersCome = (0, _jquery2.default)('#registration-form__come .registration-item__content-success ').length;\n        var popupBtnComeText = (0, _jquery2.default)('.registration-popup__btn-come span');\n        if (!currentUsersCome) {\n          popupBtnComeText.text('Закрыть');\n        } else {\n          popupBtnComeText.text('Пришел');\n        }\n\n        (0, _jquery2.default)('.registration-popup').addClass('open-popup');\n        (0, _jquery2.default)('.popup-overlay__registration').removeClass('hidden');\n      }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  }\n});\n\n(0, _jquery2.default)(\"#registration-form__come\").validate({\n  rules: {\n    card: {\n      required: true\n    }\n  },\n  messages: {\n    card: {\n      required: ''\n    }\n  },\n  submitHandler: function submitHandler(form) {\n    var data = new FormData(form);\n    var fieldData = data.get('card');\n\n    _axios2.default.post('http://localhost:3000/come', { 'name': fieldData }).then(function (res) {\n      var popupBtnComeText = (0, _jquery2.default)('.registration-popup__btn-come span');\n      if (popupBtnComeText.text() === 'Закрыть') {\n        (0, _jquery2.default)('.registration-popup').removeClass('open-popup');\n        (0, _jquery2.default)('.popup-overlay__registration').addClass('hidden');\n        document.querySelector('#registration-form .registration__input ').value = '';\n      } else {\n        (0, _jquery2.default)('.registration-popup').removeClass('open-popup');\n        (0, _jquery2.default)('.popup-overlay__registration').addClass('hidden');\n        (0, _jquery2.default)('.registration-popup__success').addClass('open-popup');\n        document.querySelector('#registration-form .registration__input ').value = '';\n      }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  }\n});\n\nvar popupButtonClose = (0, _jquery2.default)('.popup-close');\nvar popupButtonLink = (0, _jquery2.default)('.btn-popup__link');\n\npopupButtonLink.click(function () {\n  (0, _jquery2.default)('.popup').removeClass('open-popup');\n});\n\npopupButtonClose.click(function () {\n  (0, _jquery2.default)('.popup').removeClass('open-popup');\n});\n\n(0, _jquery2.default)('.registration-popup').click(function (evt) {\n  var registrationPopup = document.querySelector('.registration-popup');\n  if (evt.target === registrationPopup) {\n    (0, _jquery2.default)('.popup').removeClass('open-popup');\n    (0, _jquery2.default)('.popup-overlay__registration').addClass('hidden');\n  }\n});\n\n(0, _jquery2.default)('.registration-popup .popup-close').click(function () {\n  (0, _jquery2.default)('.popup').removeClass('open-popup');\n  (0, _jquery2.default)('.popup-overlay__registration').addClass('hidden');\n});\n\n(0, _jquery2.default)('.popup-overlay').click(function (evt) {\n  if ((0, _jquery2.default)(evt.target).closest('.popup-container').length == 0) {\n    (0, _jquery2.default)('.popup').removeClass('open-popup');\n  }\n});\n\n// autocomplete\n\n\nvar autocompleteInput = (0, _jquery2.default)('#registration-form .registration__input');\n\n_axios2.default.get('http://localhost:3000/fullnames').then(function (res) {\n  var autocompleteArray = [];\n\n  res.data.forEach(function (element) {\n    autocompleteArray.push(element.name);\n  });\n\n  var filtredAutocompliteArray = [];\n  autocompleteArray.forEach(function (element) {\n\n    autocompleteArray.forEach(function (someElement) {\n      if (element === someElement) {\n        filtredAutocompliteArray.push(element);\n      }\n    });\n  });\n  console.log(filtredAutocompliteArray);\n}\n\n// let FullNameArray = dataList.map((element) => {\n//   return element['ФИО'];\n// })\n);\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _jquery = require('jquery');\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar userCards = function userCards(data) {\n  _jquery2.default.each(data, function (index, value) {\n    (0, _jquery2.default)('.popup__text-registration').append('<div class=\"registration-item__content registration-item__content-' + (value.come === false ? 'success' : 'error') + '\">\\n        <img src=\"' + value.path + '\" class=\"registration-item__img\">\\n        <div class=\"registration-item__text\">\\n          <label class=\"registration-item__text-label\">\\n            <input class=\"registration-item__text-input ' + (value.come === false ? '' : 'hidden') + '\" type=\"radio\" name=\"card\" value=\"' + value._id + '\">\\n            <div class=\"registration-item__text-name\">\\n              ' + value.name + '\\n            </div>\\n          </label>\\n        </div>\\n        <div class=\"registration-item__status-wrapper\">\\n          <div class=\"registration-item__status\">\\n          ' + (value.come === false ? 'Не пришел' : 'Пришел') + '\\n          </div>\\n        </div>\\n      </div>\\n    </div>');\n  });\n};\n\nexports.default = userCards;\n"]}